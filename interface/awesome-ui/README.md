# LogLine UI

A Next.js dashboard for exploring LogLine folding runs. The app reads JSONL span logs and genome FASTA files directly from the repository so you can iterate without standing up a separate backend.

## Prerequisites

- Node.js 20+
- `pnpm` (preferred). `npm` and `yarn` work, but the lockfile is generated by pnpm.
- At least one folding run persisted to `logs/*.jsonl`. A demo run is produced by the command below.

```
cargo run -- --preset demo --log logs/ui-demo.jsonl
```

This generates `logs/ui-demo.jsonl`, which the UI treats as the latest run.

## Getting Started

```bash
cd interface/awesome-ui
pnpm install
pnpm dev
```

The development server listens on <http://localhost:3000>. The UI hot-reloads whenever logs or FASTA files change.

### API routes

The app exposes a few filesystem-backed endpoints:

- `GET /api/runs` — list available JSONL logs under `logs/`.
- `GET /api/runs/latest` — return the parsed metadata, spans, and summary of the newest log file.
- `GET /api/runs/{filename}` — fetch a specific log (filename must exist under `logs/`).
- `GET /api/genome` — load the demo genome sequence from `data/raw/demo_genome.fa` (override with `GENOME_PATH`).

Set the environment variables below if your logs live elsewhere:

- `LOGS_DIR` — custom directory for JSONL span logs.
- `GENOME_PATH` — absolute path to a FASTA file.

## Building for production

```bash
pnpm build
pnpm start
```

The build output is the usual `.next/` directory. Deploy to Vercel, Railway, or any Node-compatible host.

## Project structure

```
interface/awesome-ui/
├── app/           # Next.js app router pages + API routes
├── components/    # Dashboard panels and UI primitives
├── hooks/         # Reusable hooks (shadcn defaults)
├── lib/           # Log/genome helpers + shared types
└── public/        # Static assets
```

The React panels now consume real folding data:

- **Span Timeline** renders ΔS/ΔE/G trajectories, highlighting each span.
- **Span Agents** groups spans by `span_label` and summarizes stability.
- **Insights** displays run metadata, energy panel, and rule violations.
- **Genome** fetches the demo FASTA and keeps legacy mutation tooling.
- **Run selector** lets you jump between JSONL runs via the dropdown in the header.

Run the CLI, refresh the dashboard, and the widgets update automatically.
